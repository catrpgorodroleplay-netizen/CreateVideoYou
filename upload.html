<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ–∑–¥–∞—Ç—å –≤–∏–¥–µ–æ - CREATE</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial; }
        body { background: #0f0f0f; color: white; padding: 40px 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        .back-btn { background: #333; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-bottom: 30px; }
        .upload-form { background: #282828; padding: 30px; border-radius: 8px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; }
        input, textarea { width: 100%; padding: 12px; background: #404040; border: 1px solid #555; border-radius: 4px; color: white; }
        textarea { height: 100px; resize: vertical; }
        .submit-btn { background: #ff0000; color: white; padding: 15px; border: none; border-radius: 4px; cursor: pointer; width: 100%; font-size: 16px; }
        .preview { margin-top: 10px; }
        video { max-width: 100%; max-height: 200px; }
    </style>
</head>
<body>
    <div class="container">
        <button class="back-btn" onclick="window.location.href='index.html'">‚Üê –ù–∞–∑–∞–¥</button>
        
        <div class="upload-form">
            <h2>üìπ –°–û–ó–î–ê–¢–¨ –ù–û–í–û–ï –í–ò–î–ï–û</h2>
            <form id="uploadForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ:</label>
                    <input type="text" name="title" required>
                </div>
                
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                    <textarea name="description"></textarea>
                </div>
                
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ –≤–∏–¥–µ–æ —Ñ–∞–π–ª:</label>
                    <input type="file" name="video" accept="video/*" required>
                    <div class="preview">
                        <video id="videoPreview" controls style="display:none;"></video>
                    </div>
                </div>
                
                <button type="submit" class="submit-btn">üöÄ –û–ü–£–ë–õ–ò–ö–û–í–ê–¢–¨ –í–ò–î–ï–û</button>
            </form>
        </div>
    </div>

    <script>
        // –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤–∏–¥–µ–æ
        document.querySelector('input[name="video"]').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const videoPreview = document.getElementById('videoPreview');
                videoPreview.src = URL.createObjectURL(file);
                videoPreview.style.display = 'block';
            }
        });

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã
        document.getElementById('uploadForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            
            try {
                const response = await fetch('server.php?action=upload', {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                if (result.success) {
                    alert('‚úÖ –í–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ!');
                    window.location.href = 'index.html';
                } else {
                    alert('‚ùå –û—à–∏–±–∫–∞: ' + result.error);
                }
            } catch (error) {
                alert('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏');
            }
        });
    </script>
</body>
</html>
